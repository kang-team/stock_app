변경된 로직 설명
현재 시각 확인:

now_kst = datetime.datetime.now()를 사용하여 현재 시각을 가져옵니다. (서버의 시간이 한국 시간으로 설정되어 있다고 가정합니다.)
market_open_time과 market_close_time 변수에 오늘 날짜의 오전 9시와 오후 3시 30분 시각을 설정합니다.
is_trading_day 변수로 현재 요일이 주말인지 확인합니다.
price_message 생성 로직:
price_type_text라는 변수를 도입하여 "종가" 또는 "현재가" 텍스트를 유동적으로 설정하도록 했습니다.

"현재가"로 표시되는 경우:

is_trading_day가 True이고 (주말이 아니고),
now_kst가 시장 개장 시간과 폐장 시간 사이에 있으며 (장중이고),
pykrx가 가져온 actual_trade_date_dt가 오늘 날짜와 같을 때 (즉, 오늘 데이터가 이미 장부에 기록되어 있을 때).
이 모든 조건이 충족되면 price_type_text를 **"현재가"**로 설정합니다. (이때 current_price는 pykrx가 get_market_ohlcv_by_date로 가져온 오늘 날짜의 마지막 체결가입니다.)
그 외의 경우 (대부분 "종가"):

장이 열려있지 않거나 (장 시작 전, 장 마감 후),
주말/공휴일이어서 pykrx가 오늘 날짜의 데이터를 가져오지 못하고 이전 영업일 데이터를 가져왔을 때.
이때 price_type_text는 기본값인 **"종가"**를 유지합니다. (이때 current_price는 표시되는 display_date의 최종 종가입니다.)
중요 사항
서버 시간 설정: 이 코드는 Flask 앱이 실행되는 서버의 시간이 **한국 표준시(KST)**로 올바르게 설정되어 있다고 가정합니다. 만약 서버의 시간이 다르다면, 시간대 설정을 추가해야 할 수 있습니다.
공휴일 처리: is_trading_day는 주말만 확인합니다. 한국의 공휴일은 pykrx가 내부적으로 데이터를 제공하지 않음으로써 처리되므로, 별도의 공휴일 판단 로직은 추가하지 않았습니다. 즉, 공휴일에는 pykrx가 이전 영업일 데이터를 가져오므로 "오늘 날짜의 현재가" 조건에 맞지 않아 자동으로 "종가"로 표시될 것입니다.